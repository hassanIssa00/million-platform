# توثيق مشروع Million Platform

## 1. نظرة عامة
مشروع **Million Platform** هو نظام إدارة مدارس متكامل (LMS) يربط بين الطلاب، المعلمين، أولياء الأمور، والإداريين. يعتمد على معمارية حديثة (Monorepo) لتوفير أداء عالٍ وتجربة مستخدم سلسة.

## 2. التقنيات والأدوات المستخدمة (من الألف للياء)

### أ. الواجهة الأمامية (Frontend) - `apps/web`
- **Next.js 14+ (App Router)**: إطار العمل الأساسي لبناء واجهة سريعة ومتجاوبة.
- **TypeScript**: لضمان كتابة كود خالٍ من الأخطاء (Type Safety).
- **Tailwind CSS**: لتنسيق الصفحات بسرعة وبشكل احترافي.
- **Framer Motion**: لإضافة تأثيرات بصرية وحركات سلسة (Animations).
- **Socket.IO Client**: للتواصل اللحظي (مثل الامتحانات المباشرة والدردشة).
- **Radix UI**: مكونات واجهة جاهزة يمكن الوصول إليها (Accessibility).
- **Lucide React**: مكتبة أيقونات خفيفة وعصرية.
- **Zustand**: لإدارة حالة التطبيق (State Management).

### ب. الواجهة الخلفية (Backend) - `apps/api`
- **NestJS**: إطار عمل قوي لبناء خوادم Node.js قابلة للتوسع.
- **Prisma ORM**: للتعامل مع قاعدة البيانات بسهولة وأمان.
- **PostgreSQL**: قاعدة البيانات العلائقية الرئيسية.
- **Socket.IO Gateway**: لإدارة الاتصالات اللحظية (WebSockets).
- **JWT (JSON Web Tokens)**: لتأمين المصادقة وحماية المسارات.
- **Passport.js**: استراتيجيات المصادقة (Auth Strategies).
- **Zod / Class Validator**: للتحقق من صحة البيانات المدخلة.
- **Multer**: لرفع الملفات (Assignments, Profile Pictures).

### ج. البنية التحتية والأدوات (DevOps & Tools)
- **Turbo Repo**: لإدارة المشروع كـ Monorepo (يجمع الـ Backend والـ Frontend في مكان واحد).
- **Docker**: لإنشاء بيئة معزولة لقاعدة البيانات (PostgreSQL) وRedis.
- **ESLint & Prettier**: للحفاظ على جودة الكود وتنسيقه الموحد.
- **Git**: لإدارة النسخ وتتبع التغييرات.
- **Supabase (Optional)**: تم تجهيز ملفات Migration لاستخدام Supabase كبديل لقاعدة البيانات.

## 3. الميزات التي تم بناؤها

1.  **نظام المصادقة (Authentication)**: تسجيل الدخول، إنشاء حساب، وحماية البيانات باستخدام JWT.
2.  **لوحات التحكم (Portals)**:
    *   **الطالب**: جداول، امتحانات، واجبات، ألعاب تعليمية.
    *   **المعلم**: إدارة الفصول، الحضور (QR Code)، التصحيح.
    *   **ولي الأمر**: متابعة الأبناء، المدفوعات.
    *   **الإدمن**: إدارة كاملة للمستخدمين والمحتوى.
3.  **نظام الامتحانات (Million Quiz)**: لعبة تفاعلية متعددة اللاعبين في الوقت الحقيقي.
4.  **نظام الحضور (QR Attendance)**: تسجيل حضور سريع باستخدام رمز QR.
5.  **المحادثات (Chat System)**: تواصل فوري بين الطلاب والمعلمين.

## 4. كيف تتأكد من عمل المشروع (Check & Validation)

للتأكد من أن كل شيء يعمل بشكل صحيح، قمنا بإعداد أوامر بسيطة يمكنك استخدامها:

### الخطوة 1: تشغيل قاعدة البيانات
نستخدم Docker لتشغيل قاعدة البيانات بسهولة دون تثبيتها محلياً.
```bash
docker-compose up -d
```
*   **كيف تتأكد؟**: اكتب `docker ps` في التيرمينال وستجد `million_postgres` يعمل.

### الخطوة 2: تهيئة قاعدة البيانات (Migrations)
لإنشاء الجداول في قاعدة البيانات بناءً على ملفات `schema.prisma`:
```bash
cd apps/api
npx prisma migrate dev
```
*   **كيف تتأكد؟**: ستظهر رسالة نجاح بأن الجداول تم إنشاؤها (Already in sync أو Created migrations). يمكنك استخدام `npx prisma studio` لرؤية الجداول والبيانات في المتصفح.

### الخطوة 3: تشغيل السيرفرات (Development)
لتشغيل الـ Frontend والـ Backend معاً بـ أمر واحد:
```bash
npm run dev
```
*   **كيف تتأكد؟**:
    *   الـ Backend سيعمل على: `http://localhost:4000` (ستظهر رسالة NestJS application successfully started).
    *   الـ Frontend سيعمل على: `http://localhost:3000`.

### الخطوة 4: فحص الكود (Linting & Types)
للتأكد من أن الكود سليم ولا توجد أخطاء برمجية:
```bash
# فحص التنسيق والأخطاء اللغوية
npm run lint

# فحص أنواع البيانات (TypeScript)
npm run check-types
```

### الخطوة 5: التجربة العملية (Manual Check)
1.  افتح المتصفح على `http://localhost:3000`.
2.  قم بتسجيل الدخول بأحد الحسابات التجريبية أو أنشئ حساباً جديداً.
3.  تنقل بين الصفحات (الرئيسية، الطلاب، المعلمين) للتأكد من سرعة الاستجابة.
